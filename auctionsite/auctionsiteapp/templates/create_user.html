{% extends 'base.html' %}

{% block content %}
  <div>
    <form method="POST" id="post-form">
      {% csrf_token %}
      <div>
        <label>Email</label>
        <input type="email" id="email" placeholder="Email">
      </div>
      <div>
        <label>Date Of Birth</label>
        <input type="date" id="dateOfBirth" placeholder="Date Of Birth">
      </div>
      <div>
        <label>Password</label>
        <input type="password" id="password" placeholder="Password">
      </div>
      <button type="submit">Submit</button>
      <a href="/">Back to index</a>
    </form>
  </div>
  <script>
    $(document).on('submit', '#post-form',function(e){
      e.preventDefault();
      $.ajax({
        type:'POST',
        url:'{% url "auctionsiteapp:createuser" %}',
        data:{
          email:$('#email').val(),
          dateOfBirth:$('#dateOfBirth').val(),
          password:$('#password').val(),
          csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
          action: 'post'
        },
        success:function(json){
          document.getElementById("post-form").reset();
        }
      });
    });
  </script>
{% endblock %}
